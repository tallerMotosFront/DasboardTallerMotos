<div class="login-container">
  <div class="login-background">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="login-content">
    <!-- Logo y Botón de Volver -->
    <div class="login-header">
      <button mat-icon-button routerLink="/" class="back-btn">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="logo">
        <mat-icon>two_wheeler</mat-icon>
        <span>MotoExpert</span>
      </div>
    </div>

    <!-- Card de Login -->
    <mat-card class="login-card">
      <mat-card-header>
        <div class="card-header-content">
          <mat-icon class="header-icon">admin_panel_settings</mat-icon>
          <div>
            <mat-card-title>Acceso Empleados</mat-card-title>
            <mat-card-subtitle>Ingresa tus credenciales para continuar</mat-card-subtitle>
          </div>
        </div>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
          
          <!-- Email/Usuario -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Usuario o Email</mat-label>
            <input 
              matInput 
              formControlName="username" 
              placeholder="empleado@motoexpert.com"
              autocomplete="username">
            <mat-icon matPrefix>person</mat-icon>
            <mat-error *ngIf="loginForm.get('username')?.hasError('required')">
              El usuario es obligatorio
            </mat-error>
            <mat-error *ngIf="loginForm.get('username')?.hasError('email')">
              Ingresa un email válido
            </mat-error>
          </mat-form-field>

          <!-- Password -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Contraseña</mat-label>
            <input 
              matInput 
              [type]="hidePassword ? 'password' : 'text'" 
              formControlName="password"
              placeholder="••••••••"
              autocomplete="current-password">
            <mat-icon matPrefix>lock</mat-icon>
            <button 
              mat-icon-button 
              matSuffix 
              type="button"
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Ocultar contraseña'"
              [attr.aria-pressed]="hidePassword">
              <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
              La contraseña es obligatoria
            </mat-error>
            <mat-error *ngIf="loginForm.get('password')?.hasError('minlength')">
              Mínimo 6 caracteres
            </mat-error>
          </mat-form-field>

          <!-- Remember me & Forgot password -->
          <div class="form-options">
            <mat-checkbox formControlName="rememberMe" color="primary">
              Recordarme
            </mat-checkbox>
            <a href="#" class="forgot-password" (click)="$event.preventDefault(); forgotPassword()">
              ¿Olvidaste tu contraseña?
            </a>
          </div>

          <!-- Error message -->
          <div class="error-message" *ngIf="errorMessage">
            <mat-icon>error_outline</mat-icon>
            <span>{{ errorMessage }}</span>
          </div>

          <!-- Submit button -->
          <button 
            mat-raised-button 
            color="primary" 
            type="submit" 
            class="login-btn"
            [disabled]="loginForm.invalid || isLoading">
            <mat-spinner diameter="20" *ngIf="isLoading"></mat-spinner>
            <span *ngIf="!isLoading">Iniciar Sesión</span>
          </button>

          <!-- Divider -->
          <div class="divider">
            <span>O continúa con</span>
          </div>

          <!-- Social Login -->
          <div class="social-login">
            <button mat-stroked-button type="button" class="social-btn google-btn" (click)="loginWithGoogle()">
              <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
              Google
            </button>
            <button mat-stroked-button type="button" class="social-btn microsoft-btn" (click)="loginWithMicrosoft()">
              <mat-icon>business</mat-icon>
              Microsoft
            </button>
          </div>

        </form>
      </mat-card-content>

      <!-- Footer -->
      <mat-card-footer>
        <p class="card-footer-text">
          ¿No eres empleado? 
          <a routerLink="/">Volver al inicio</a>
        </p>
      </mat-card-footer>
    </mat-card>

    <!-- Info Cards -->
    <div class="info-cards">
      <div class="info-card">
        <mat-icon>security</mat-icon>
        <div>
          <h4>Conexión Segura</h4>
          <p>Tus datos están protegidos</p>
        </div>
      </div>
      <div class="info-card">
        <mat-icon>support_agent</mat-icon>
        <div>
          <h4>Soporte 24/7</h4>
          <p>Estamos aquí para ayudarte</p>
        </div>
      </div>
    </div>

    <!-- Demo Credentials -->
    <mat-card class="demo-card">
      <mat-card-content>
        <div class="demo-header">
          <mat-icon>info</mat-icon>
          <strong>Credenciales de Prueba</strong>
        </div>
        <div class="demo-credentials">
          <div class="demo-item">
            <span class="label">Usuario:</span>
            <span class="value">admin@motoexpert.com</span>
            <button mat-icon-button (click)="copyToClipboard('admin@motoexpert.com')" matTooltip="Copiar">
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>
          <div class="demo-item">
            <span class="label">Contraseña:</span>
            <span class="value">123456</span>
            <button mat-icon-button (click)="copyToClipboard('123456')" matTooltip="Copiar">
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>
        </div>
        <button mat-button color="primary" class="autofill-btn" (click)="autoFillCredentials()">
          <mat-icon>flash_on</mat-icon>
          Autocompletar
        </button>
      </mat-card-content>
    </mat-card>
  </div>
</div>